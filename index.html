<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chase Savings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* =========================
       2030 NEON–GLASS DASHBOARD
       ========================= */

    :root{
      --bg:#0a0a10;
      --panel:#0e0f17;
      --panel-2:#0b0c14;
      --text:#e9e8f7;
      --muted:#a5a3c9;
      --grid:rgba(140,140,200,.06);

      --violet:#8b5cf6;
      --pink:#ec4899;
      --sky:#60a5fa;
      --mint:#34d399;
      --amber:#fbbf24;

      --glow-violet: 0 10px 30px rgba(139,92,246,.35);
      --glass: linear-gradient( to bottom right, rgba(18,18,30,.85), rgba(14,14,24,.85) ) padding-box,
               linear-gradient(135deg, var(--sky), var(--violet)) border-box;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0; font-family: "Segoe UI", Roboto, system-ui, -apple-system, sans-serif;
      color:var(--text); background:var(--bg); overflow:auto;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* ============= Global FX background ============= */
    .fx{
      position:fixed; inset:0; z-index:-2; pointer-events:none;
      background:
        radial-gradient(900px 600px at 15% -10%, rgba(96,165,250,.22), transparent 60%),
        radial-gradient(900px 700px at 85% 120%, rgba(139,92,246,.18), transparent 60%),
        linear-gradient(180deg, #090911 0%, #0a0a12 60%, #090911 100%);
    }
    .fx::before,
    .fx::after{
      content:""; position:absolute; inset:-40%;
      background: conic-gradient(from 0turn, rgba(96,165,250,.12), rgba(124,58,237,.12), rgba(236,72,153,.12), rgba(96,165,250,.12));
      filter: blur(60px); animation: swirl 26s linear infinite;
    }
    .fx::after{ animation-duration: 34s; animation-direction: reverse; opacity: .6; }
    @keyframes swirl{ to{ transform: rotate(1turn); } }
    /* Subtle grid */
    .grid{
      position:fixed; inset:0; z-index:-1; pointer-events:none;
      background:
        linear-gradient(transparent 79px, var(--grid) 80px),
        linear-gradient(90deg, transparent 79px, var(--grid) 80px);
      background-size:80px 80px;
      mask: radial-gradient(60% 60% at 50% 50%, #000 68%, transparent 100%);
    }

    /* ===== Visibility helpers ===== */
    .fade{ transition:opacity .4s ease; }
    .hidden{ opacity:0; pointer-events:none; }
    .visible{ opacity:1; pointer-events:auto; }

    /* ===================== LOGIN (black + neon) ===================== */
    #login-screen{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      padding:24px; color:#fff; z-index:9999;
    }
    .login-shell{
      width:min(440px, 94vw); border-radius:22px; padding:3px; background:
        linear-gradient(120deg, #60a5fa, #8b5cf6, #60a5fa);
      box-shadow: 0 26px 80px rgba(0,0,0,.65), 0 0 120px rgba(96,165,250,.35);
    }
    #login-box{
      border-radius:20px; padding:36px 30px 28px; text-align:center; color:#e8e7ef;
      background:#0b0b10; box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
    }
    .login-title{
      font-size: clamp(1.8rem, 3.6vw, 2.2rem); font-weight:700; letter-spacing:.3px;
      background: linear-gradient(90deg, #60a5fa, #c084fc 45%, #60a5fa);
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      margin-bottom:22px;
    }
    #login-error{ height:1.2em; margin-bottom:12px; color:#ff6b6b; opacity:0; transition:opacity .3s; }
    .input-group{ position:relative; margin:14px 0; }
    .input{
      width:100%; padding:14px 14px 14px 50px; border-radius:14px;
      background:#111223; border:1px solid #26263a; color:#e5e7eb; font-size:1rem;
      transition: border-color .2s, box-shadow .2s, background .2s;
    }
    .input::placeholder{ color:#979bb2; }
    .input:focus{ outline:none; border-color:var(--sky); box-shadow:0 0 0 4px rgba(96,165,250,.22), var(--glow-violet); background:#0f1020; }
    .input-icon{ position:absolute; top:50%; left:14px; transform:translateY(-50%); width:22px; height:22px; filter: drop-shadow(0 2px 4px rgba(96,165,250,.55)); }

    #login-btn{
      width:100%; display:flex; align-items:center; justify-content:center; gap:10px;
      padding:13px 16px; border-radius:14px; cursor:pointer;
      background:#0f0f18; color:#fff; font-weight:700; border:1px solid #2a2b36;
      transition: box-shadow .2s, border-color .2s, transform .05s, filter .2s;
    }
    #login-btn:hover, #login-btn:focus{ border-color:var(--sky); box-shadow:0 0 0 4px rgba(96,165,250,.18), var(--glow-violet); outline:none; filter:saturate(1.08); }
    #login-btn:active{ transform:translateY(1px); }
    .btn-icon{ width:20px; height:20px; filter: drop-shadow(0 2px 4px rgba(96,165,250,.45)); }

    /* ===================== DASHBOARD ===================== */
    .page{ position:absolute; inset:0; opacity:0; pointer-events:none; overflow:auto; }
    .page.active{ opacity:1; pointer-events:auto; }

    .topbar{
      position:sticky; top:0; z-index:5; padding:14px 20px; backdrop-filter: blur(10px);
      background: linear-gradient( to right, rgba(12,12,22,.72), rgba(11,11,20,.58) );
      border-bottom:1px solid rgba(255,255,255,.06);
      display:flex; align-items:center; justify-content:space-between;
    }
    .brand{
      font-weight:800; letter-spacing:.4px;
      background: linear-gradient(90deg, var(--sky), var(--violet));
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      font-size: clamp(1.2rem, 2.2vw, 1.5rem);
    }
    .top-actions{ display:flex; gap:10px; }
    .chip{
      padding:8px 12px; border-radius:999px; font-size:.9rem; color:#dfe3ff;
      background: linear-gradient(120deg, #121225, #0e0f18); border:1px solid rgba(255,255,255,.08);
    }

    .container{ max-width:1200px; margin:28px auto 56px; padding:0 20px; }

    .kpis{ display:grid; grid-template-columns: repeat(12, 1fr); gap:16px; margin-bottom:16px; }
    .card{
      grid-column: span 4; border-radius:16px; padding:18px; background: var(--glass);
      border:2px solid transparent; color:var(--text);
      box-shadow: 0 20px 60px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.03);
      backdrop-filter: blur(10px);
      transition: transform .06s, box-shadow .25s, filter .25s;
    }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 28px 80px rgba(96,165,250,.28); filter: saturate(1.05); }
    .card h4{ margin-bottom:10px; font-weight:700; color:#dfe2ff; }
    .stat{ font-size: clamp(1.4rem, 2.6vw, 2rem); font-weight:800; letter-spacing:.2px; }
    .stat-gradient{
      background: linear-gradient(90deg, var(--sky), var(--violet));
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
    }
    .muted{ color:var(--muted); font-size:.92rem; }

    /* === Realistic progress ring (SVG) === */
    .ring-3d{
      position:relative; width:92px; height:92px; display:grid; place-items:center;
      filter: drop-shadow(0 6px 18px rgba(96,165,250,.18));
    }
    .ring-3d::before{
      content:""; position:absolute; inset:10px;
      border-radius:50%;
      background: radial-gradient(60% 60% at 50% 40%, rgba(96,165,250,.16), transparent 70%);
      pointer-events:none;
    }
    .ring-svg{ width:100%; height:100%; transform:rotate(-90deg); }
    .ring-track{ fill:none; stroke:#151b25; stroke-width:12; filter: drop-shadow(0 2px 6px rgba(0,0,0,.5)); opacity:.95; }
    .ring-progress{
      fill:none; stroke:url(#ringGradBlue); stroke-width:12; stroke-linecap:round;
      filter:url(#ringGlowBlue); stroke-dasharray: 0 100;
      transition: stroke-dasharray .8s cubic-bezier(.22,.9,.2,1), stroke .2s;
    }
    .ring-txt{ position:absolute; inset:0; display:grid; place-items:center; font-weight:800; color:#d9ecff; text-shadow: 0 1px 0 rgba(0,0,0,.4); }

    .balance-panel{ grid-column: span 8; display:flex; align-items:center; gap:18px; }
    .actions{ display:flex; flex-wrap:wrap; gap:12px; margin-top:10px; }
    .action-btn{
      display:inline-flex; align-items:center; gap:10px; padding:12px 14px; border-radius:12px; cursor:pointer;
      background: linear-gradient(#0f0f18,#0a0a14) padding-box,
                  linear-gradient(135deg, var(--sky), var(--violet)) border-box;
      border:1px solid transparent; color:#fff; font-weight:700; box-shadow: var(--glow-violet);
      transition: transform .05s, box-shadow .2s, filter .2s;
    }
    .action-btn:hover{ box-shadow: 0 14px 34px rgba(96,165,250,.35); filter:saturate(1.1); }
    .action-btn:active{ transform: translateY(1px); }
    .action-btn svg{ width:20px; height:20px; }

    .facts{ grid-column: span 4; }
    .kv{ display:flex; justify-content:space-between; padding:10px 0; border-top:1px solid rgba(255,255,255,.07); }
    .kv:first-child{ border-top:none; }

    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.5);
      opacity:0; pointer-events:none; transition:opacity .25s ease;
    }
    .overlay.visible{ opacity:1; pointer-events:auto; }
    .modal{
      position:fixed; top:50%; left:50%; transform:translate(-50%,-50%) scale(.94);
      width:min(520px, 94vw); border-radius:16px; padding:18px;
      background: var(--glass); border:2px solid transparent; color:var(--text);
      box-shadow: 0 24px 80px rgba(0,0,0,.6), inset 0 0 0 1px rgba(255,255,255,.03);
      backdrop-filter: blur(10px);
      opacity:0; pointer-events:none; transition:opacity .25s ease, transform .25s ease;
    }
    .modal.visible{ opacity:1; pointer-events:auto; transform:translate(-50%,-50%) scale(1); }
    .modal h3{ margin:6px 0 10px; font-weight:800; }
    .modal .close-btn{ position:absolute; top:8px; right:10px; font-size:1.3rem; background:none; border:none; color:var(--muted); cursor:pointer; }

    /* Transactions list + search */
    .transactions-list{ list-style:none; margin:8px 0 0; padding:0; max-height:420px; overflow:auto; }
    .transactions-list .date-header{ font-weight:700; color:#dfe2ff; margin-bottom:6px; }
    .tx-item{
      padding:12px; border-radius:12px; margin:10px 0; cursor:pointer;
      background: linear-gradient(#121222,#0f1020) padding-box,
                  linear-gradient(135deg, rgba(96,165,250,.55), rgba(139,92,246,.55)) border-box;
      border:1px solid transparent; transition:filter .2s, transform .05s, box-shadow .2s;
    }
    .tx-item:hover{ filter:saturate(1.06); box-shadow: 0 10px 26px rgba(96,165,250,.28); }
    .tx-summary{ display:flex; justify-content:space-between; gap:10px; }
    .credit{ color:#22c55e; font-weight:700; }
    .debit{ color:#f87171; font-weight:700; }
    .muted{ color:var(--muted); font-size:.92rem; }

    .search-wrap{
      display:flex; align-items:center; gap:10px;
      margin:10px 0 6px; padding:10px 12px; border-radius:12px;
      background: linear-gradient(#121222,#0f1020) padding-box,
                  linear-gradient(135deg, rgba(96,165,250,.5), rgba(139,92,246,.5)) border-box;
      border:1px solid transparent; box-shadow: var(--glow-violet);
    }
    .search-wrap svg{ width:18px; height:18px; opacity:.8; }
    #tx-search{
      flex:1; background:transparent; border:none; outline:none; color:var(--text);
      font-size:.98rem; padding:4px 0;
    }
    #tx-clear{
      background:none; border:none; color:var(--muted); cursor:pointer;
      font-size:1.1rem; line-height:1; padding:2px 6px; border-radius:8px;
      visibility:hidden;
    }
    #tx-clear:hover{ color:#fff; }

    #tx-detail-modal{ padding-top:56px; }
    .back-btn{ position:absolute; top:16px; left:16px; background:none; border:none; color:var(--muted); cursor:pointer; }
    .detail-rows .row{ padding:8px 0; border-top:1px solid rgba(255,255,255,.08); }
    .detail-rows .row:first-child{ border-top:none; }
    .row-label{ color:var(--muted); font-size:.92rem; }

    @media (max-width: 980px){
      .card{ grid-column: span 6; }
      .balance-panel{ grid-column: span 12; }
      .facts{ grid-column: span 12; }
    }
    @media (max-width: 640px){
      .card{ grid-column: span 12; }
      .actions{ gap:10px; }
      .action-btn{ width:100%; justify-content:center; }
    }
    @media (prefers-reduced-motion: reduce){
      .fade, .modal, #login-btn, .tx-item, .card, .action-btn{ transition:none !important; }
      .fx::before, .fx::after{ animation:none !important; }
    }
  </style>
</head>
<body>
  <div class="fx"></div>
  <div class="grid"></div>

  <!-- =================== LOGIN =================== -->
  <div id="login-screen" class="fade visible">
    <div class="login-shell">
      <div id="login-box">
        <h2 class="login-title">Welcome to Chase<br/>Savings</h2>

        <div id="login-error">Invalid credentials</div>

        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="#60a5fa" d="M12 13.2a5.2 5.2 0 1 0 0-10.4 5.2 5.2 0 0 0 0 10.4Z"/>
            <path fill="#8b5cf6" d="M4.2 20.6c0-3.4 3.9-6.2 7.8-6.2s7.8 2.8 7.8 6.2v.2c0 .7-.6 1.2-1.3 1.2H5.5c-.7 0-1.3-.5-1.3-1.2v-.2Z"/>
          </svg>
          <input id="username" class="input" type="text" placeholder="Username" />
        </div>

        <div class="input-group">
          <svg class="input-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="#60a5fa" d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2Zm-8-2a3 3 0 1 1 6 0v2H9V7Zm4 9.7V17a1 1 0 1 0-2 0v-.3a2 2 0 1 0 2 0Z"/>
          </svg>
          <input id="password" class="input" type="password" placeholder="Password" />
        </div>

        <button id="login-btn">
          <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="#8b5cf6" d="M12 3a1 1 0 0 1 1 1v5h-2V5H6v14h5v-4h2v5a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7Zm8.7 9.3-4-4-1.4 1.4 1.3 1.3H12v2h4.6l-1.3 1.3 1.4 1.4 4-4a1 1 0 0 0 0-1.4Z"/>
          </svg>
          Log In
        </button>
      </div>
    </div>
  </div>

  <!-- =================== DASHBOARD =================== -->
  <div id="dashboard" class="hidden fade">
    <div id="savings" class="page active">
      <div class="topbar">
        <div class="brand">Chase Savings</div>
        <div class="top-actions">
          <div class="chip">Status: <strong>Active</strong></div>
          <div class="chip">Acct ••••9124</div>
        </div>
      </div>

      <div class="container">
        <div class="kpis">
          <!-- Balance / actions -->
          <div class="card balance-panel">
            <div>
              <h4>Available Balance</h4>
              <div id="bal" class="stat stat-gradient">$741.36</div>
              <div class="actions">
                <button id="show-trans" class="action-btn" title="See recent activity">
                  <svg viewBox="0 0 24 24"><path fill="#60a5fa" d="M4 4h16a1 1 0 0 1 1 1v3H3V5a1 1 0 0 1 1-1zm-1 7h18v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-7zm4 2v2h2v-2H7zm4 0v2h6v-2h-6z"/></svg>
                  Recent transactions
                </button>
                <button class="action-btn" title="Transfer">
                  <svg viewBox="0 0 24 24"><path fill="#8b5cf6" d="M4 7h9V4l5 5-5 5v-3H4zM20 17H11v3l-5-5 5-5v3h9z"/></svg>
                  Transfer
                </button>
              </div>
            </div>
          </div>

          <!-- Goal Progress Ring -->
          <div class="card" style="display:flex; align-items:center; gap:16px;">
            <div class="ring-3d">
              <svg class="ring-svg" viewBox="0 0 120 120" aria-hidden="true">
                <defs>
                  <linearGradient id="ringGradBlue" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%"  stop-color="#60a5fa"/>
                    <stop offset="100%" stop-color="#8b5cf6"/>
                  </linearGradient>
                  <filter id="ringGlowBlue" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="2.5" result="blur"/>
                    <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                  </filter>
                </defs>
                <circle class="ring-track" cx="60" cy="60" r="46"></circle>
                <circle class="ring-progress" id="goalRing" cx="60" cy="60" r="46" pathLength="100"></circle>
              </svg>
              <span class="ring-txt" id="goalPct">0%</span>
            </div>
            <div>
              <h4>Savings Goal</h4>
              <div class="muted">Goal: <strong id="goalLbl">$2,000</strong></div>
            </div>
          </div>

          <!-- Account Snapshot -->
          <div class="card facts">
            <h4>Account Snapshot</h4>
            <div class="kv"><span class="muted">APY</span><strong>184.00%</strong></div>
            <div class="kv"><span class="muted">Account number</span><strong>102979124</strong></div>
            <div class="kv"><span class="muted">Routing number</span><strong>072000326</strong></div>
            <div class="kv"><span class="muted">Total interest earned</span><strong>$66.67</strong></div>
            <div class="kv"><span class="muted">Next tax statement</span><strong>08/13/2025</strong></div>
            <div class="kv"><span class="muted">Next interest date</span><strong>08/09/2025</strong></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ============ OVERLAY & MODALS ============ -->
  <div id="overlay" class="overlay"></div>

  <div id="trans-modal" class="modal">
    <button id="close-trans" class="close-btn">×</button>
    <h3>Recent transactions</h3>

    <!-- search -->
    <div class="search-wrap">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="#60a5fa" d="M15.5 14h-.8l-.3-.3a6 6 0 1 0-.9.9l.3.3v.8L19 20.5 20.5 19 15.5 14Zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14Z"/>
      </svg>
      <input id="tx-search" type="text" autocomplete="off" placeholder="Search merchant, amount, date…" />
      <button id="tx-clear" title="Clear">×</button>
    </div>

    <div class="date-header" style="color:var(--muted);">Pending (0)</div>
    <div style="margin-bottom:8px;color:var(--muted);">No pending transactions</div>

    <ul id="tx-list" class="transactions-list"></ul>
  </div>

  <!-- (Optional) Transaction details reuse styles -->
  <div id="tx-detail-modal" class="modal">
    <button class="back-btn">← Back</button>
    <h3>Transaction Details</h3>
    <div class="detail-rows"></div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const overlay     = document.getElementById('overlay');
    const transModal  = document.getElementById('trans-modal');
    const detailModal = document.getElementById('tx-detail-modal');
    const loginScreen = document.getElementById('login-screen');
    const dashboard   = document.getElementById('dashboard');
    const btn         = document.getElementById('login-btn');

    /* ========= SAVINGS DATA ========= */
    const balance = 741.36;
    const savingsGoal = 2000; // adjust if you want a different goal

    // Every transaction from your list — nothing omitted.
    const transactions = [
      { date:'Aug 05, 2025', merchant:'Online Transfer to CHECKING ****2431', amount:-350.00,  type:'debit'  },
      { date:'Aug 05, 2025', merchant:'ACH credit from TOTAL CHECKING (...6750)', amount:+650.00, type:'credit' },

      { date:'Aug 04, 2025', merchant:'Online Transfer from CREDIT ACCEPTANCE', amount:+350.00, type:'credit' },

      { date:'Aug 02, 2025', merchant:'Interest earned', amount:+3.12, type:'credit' },

      { date:'Jul 27, 2025', merchant:'AFFIRM.COM PAYMENTS', amount:-331.00, type:'debit'  },
      { date:'Jul 27, 2025', merchant:'Interest earned', amount:+14.33, type:'credit' },

      { date:'Jul 21, 2025', merchant:'ACH credit from TOTAL CHECKING (...6750)', amount:+27.11, type:'credit' },

      { date:'Jul 20, 2025', merchant:'ACH debit to TOTAL CHECKING (...6750)', amount:-27.11, type:'debit' },

      { date:'Jul 19, 2025', merchant:'Interest earned', amount:+13.84, type:'credit' },

      { date:'Jul 18, 2025', merchant:'Amazon.com', amount:-269.57, type:'debit' },

      { date:'Jul 17, 2025', merchant:'CHSE PAYOVERTIME QMZU-AMXQ', amount:-190.00, type:'debit' },
      { date:'Jul 17, 2025', merchant:'ACH credit from TOTAL CHECKING (...6750)', amount:+850.00, type:'credit' },

      { date:'Jul 12, 2025', merchant:'Interest earned', amount:+0.02, type:'credit' },

      { date:'Jul 05, 2025', merchant:'Interest earned', amount:+0.02, type:'credit' },

      { date:'Jun 28, 2025', merchant:'Interest earned', amount:+0.05, type:'credit' },

      { date:'Jun 13, 2025', merchant:'CHASE TRVL (LCA-HND)', amount:-8901.66, type:'debit' },
      { date:'Jun 13, 2025', merchant:'TRAVEL', amount:-89.01, type:'debit' },
      { date:'Jun 13, 2025', merchant:'Deposit', amount:+8.00, type:'credit' },

      { date:'Jun 12, 2025', merchant:'Interest earned', amount:+2.91, type:'credit' },

      { date:'Jun 11, 2025', merchant:'Interest earned', amount:+0.02, type:'credit' },

      { date:'Jun 10, 2025', merchant:'PTFS Reservations', amount:-14.90, type:'debit' },

      { date:'Jun 08, 2025', merchant:'CARD PAYMENT* 8126', amount:-40.00, type:'debit' },
      { date:'Jun 08, 2025', merchant:'CARD PAYMENT* 7295', amount:-40.00, type:'debit' },

      { date:'Jun 04, 2025', merchant:'Interest earned', amount:+6.01, type:'credit' },

      { date:'May 28, 2025', merchant:'Interest earned', amount:+5.81, type:'credit' },
      { date:'May 21, 2025', merchant:'Interest earned', amount:+5.61, type:'credit' },
      { date:'May 14, 2025', merchant:'Interest earned', amount:+4.56, type:'credit' },
      { date:'May 07, 2025', merchant:'Interest earned', amount:+5.27, type:'credit' },

      { date:'Apr 30, 2025', merchant:'Interest earned', amount:+5.10, type:'credit' },

      { date:'Apr 23, 2025', merchant:'Deposit', amount:+144.08, type:'credit' }
    ];

    // ====== Goal ring ======
    const ring = document.getElementById('goalRing');
    const ringTxt = document.getElementById('goalPct');
    function setGoalProgress(current, goal){
      const pct = Math.max(0, Math.min(100, (current/goal)*100));
      ring.style.strokeDasharray = `${pct} 100`;
      ringTxt.textContent = `${Math.round(pct)}%`;
      // color shift: green <50, amber 50–80, violet 80+
      let color = '#34d399';
      if (pct >= 80) color = '#8b5cf6';
      else if (pct >= 50) color = '#fbbf24';
      ring.style.stroke = color;
      ring.style.filter = `drop-shadow(0 6px 16px ${color}66)`;
    }
    setGoalProgress(balance, savingsGoal);
    document.getElementById('goalLbl').textContent = `$${savingsGoal.toLocaleString()}`;
    document.getElementById('bal').textContent = `$${balance.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}`;

    // ===== Render transactions =====
    const txListEl = document.getElementById('tx-list');

    function renderList(list = transactions){
      txListEl.innerHTML = '';
      if (!list.length){
        txListEl.innerHTML = '<li class="muted" style="padding:12px 6px;">No matches.</li>';
        return;
      }
      // group by date (preserves insertion order)
      const byDate = {};
      list.forEach(t => { (byDate[t.date] ??= []).push(t); });

      Object.entries(byDate).forEach(([date, items])=>{
        const header = document.createElement('div');
        header.className = 'date-header';
        header.textContent = `${date} (${items.length})`;
        txListEl.appendChild(header);

        items.forEach(tx => {
          const li = document.createElement('li');
          li.className = 'tx-item';
          const amt = (tx.amount >= 0 ? '+' : '') + tx.amount.toFixed(2);
          li.innerHTML = `
            <div class="tx-summary">
              <span>${tx.merchant}</span>
              <span class="${tx.amount >= 0 ? 'credit' : 'debit'}">$${amt}</span>
            </div>
          `;
          li.addEventListener('click', () => openDetail(tx));
          txListEl.appendChild(li);
        });
      });
    }
    renderList();

    function openDetail(tx){
      const rows = [
        {label:'Merchant', value: tx.merchant},
        {label:'Date',     value: tx.date},
        {label:'Amount',   value: (tx.amount>=0?'+':'-') + '$' + Math.abs(tx.amount).toFixed(2)},
        {label:'Type',     value: tx.type}
      ];
      const cont = detailModal.querySelector('.detail-rows');
      cont.innerHTML = rows.map(r=>`<div class="row"><div class="row-label">${r.label}</div><div>${r.value}</div></div>`).join('');
      close(transModal);
      open(detailModal);
    }

    // ===== Search (prefix / word-start) =====
    const searchInput = document.getElementById('tx-search');
    const clearBtn    = document.getElementById('tx-clear');

    function escapeRegExp(s){ return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function filterTx(q){
      if(!q) return transactions;
      const tokens = q.trim().toLowerCase().split(/\s+/).map(escapeRegExp);
      return transactions.filter(tx => {
        const hay = `${tx.merchant} ${tx.date} ${tx.amount.toFixed(2)} ${tx.type}`.toLowerCase();
        return tokens.every(t => new RegExp(`(^|\\b|\\s)${t}`).test(hay));
      });
    }
    searchInput.addEventListener('input', () => {
      const q = searchInput.value;
      renderList(filterTx(q));
      clearBtn.style.visibility = q ? 'visible' : 'hidden';
    });
    clearBtn.addEventListener('click', () => {
      searchInput.value = '';
      renderList(transactions);
      clearBtn.style.visibility = 'hidden';
      searchInput.focus();
    });

    // ===== Open/close helpers =====
    const open = (m)=>{ overlay.classList.add('visible'); m.classList.add('visible'); };
    const close= (m)=>{ m.classList.remove('visible'); overlay.classList.remove('visible'); };

    document.getElementById('show-trans').onclick = () => {
      open(transModal);
      renderList(filterTx(searchInput.value));
      setTimeout(()=>searchInput.focus(), 50);
    };
    document.getElementById('close-trans').onclick = () => close(transModal);
    document.querySelector('#tx-detail-modal .back-btn').onclick = () => { close(detailModal); open(transModal); };

    /* ========= Login: allow ANY non-empty credentials ========= */
    function tryLogin(){
      const u = document.getElementById('username').value.trim();
      const p = document.getElementById('password').value;
      const err = document.getElementById('login-error');
      if (u && p){
        loginScreen.classList.remove('visible');
        loginScreen.classList.add('hidden');
        setTimeout(() => {
          dashboard.classList.remove('hidden');
          dashboard.classList.add('visible');
        }, 300);
      } else {
        err.textContent = 'Enter username & password';
        err.style.opacity = '1';
        setTimeout(() => err.style.opacity = '0', 1800);
      }
    }
    btn.addEventListener('click', tryLogin);
    ['username','password'].forEach(id=>{
      document.getElementById(id).addEventListener('keydown', e => { if(e.key==='Enter') tryLogin(); });
    });
  });
  </script>
</body>
</html>
